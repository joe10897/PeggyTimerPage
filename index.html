<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ä¸‹ç­å€’è¨ˆæ™‚èˆ‡å¸¸ç”¨ç¶²ç«™æ•´åˆ</title>
  <!-- æ–°å¢ Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
        font-family: 'Noto Sans TC', sans-serif;
        background: url('https://source.unsplash.com/random/1920x1080') no-repeat center center fixed;
        background-size: cover;
        margin: 0;
        padding: 0;
        color: #333;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
    }

    .container {
        background-color: rgba(255, 255, 255, 0.92);
        border-radius: 16px;
        padding: 30px;
        max-width: 900px;
        width: 90%;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.25);
        display: grid;
        gap: 25px;
        text-align: center;
    }

    .cat {
        font-size: 80px;
        animation: bounce 1.2s infinite;
    }

    @keyframes bounce {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-15px); }
    }

    .countdown {
        font-size: 2.5rem;
        font-weight: bold;
    }

    .date, .weather {
        font-size: 1.2rem;
        color: #444;
    }

    input, button {
        padding: 10px 15px;
        border-radius: 8px;
        border: 1px solid #ccc;
        margin: 5px;
        font-size: 1rem;
    }

    button {
        background-color: #4CAF50;
        color: white;
        cursor: pointer;
        border: none;
        transition: background-color 0.3s;
    }

    button:hover {
        background-color: #45a049;
    }

    .section {
        background: #fff;
        border-radius: 10px;
        padding: 15px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        text-align: left;
    }

    .tools {
        text-align: center;
    }

    .tools h3 {
        margin-bottom: 10px;
    }

    .tools a img {
        width: 48px;
        height: 48px;
        margin: 0 10px;
        transition: transform 0.3s;
    }

    .tools a img:hover {
        transform: scale(1.2);
    }

    @media (max-width: 600px) {
        .countdown {
            font-size: 2rem;
        }

        input, button {
            width: 100%;
            margin: 5px 0;
        }

        .tools a img {
            width: 40px;
            height: 40px;
            margin: 5px;
        }
    }
  </style>
</head>
<body>
  <div class="container">
      <div class="cat">ğŸ±</div>
      <div class="countdown" id="timer">å€’è¨ˆæ™‚ï¼š00:00:00</div>
      <div class="date" id="currentDate">2025å¹´5æœˆ10æ—¥ æ˜ŸæœŸå…­</div>
      <div class="weather" id="weather">ç›®å‰å¤©æ°£ï¼šæ­£åœ¨åŠ è¼‰...</div>

      <div class="section">
          <h3>è¨­å®šä¸‹ç­æ™‚é–“</h3>
          <input type="time" id="setTime" value="21:00">
          <button onclick="setEndTime()">è¨­å®š</button>
      </div>

      <div class="section">
          <h3>é ç´„æé†’</h3>
          <input type="text" id="clientName" placeholder="è¼¸å…¥å®¢æˆ¶åç¨±">
          <input type="time" id="clientTime">
          <button onclick="addClient()">æ–°å¢å®¢æˆ¶</button>
          <div id="clientList"></div>
      </div>

      <div class="section">
          <h3>ä»»å‹™æ¸…å–®</h3>
          <input type="text" id="taskInput" placeholder="è¼¸å…¥ä»»å‹™åç¨±">
          <button onclick="addTask()">æ–°å¢ä»»å‹™</button>
          <div id="tasks"></div>
      </div>

      <div class="section">
          <h3>æ­·å²è¨˜éŒ„</h3>
          <div id="history"></div>
      </div>

      <div class="tools">
          <h3>å¸¸ç”¨ç¶²ç«™</h3>
          <a href="https://www.instagram.com/" target="_blank">
              <img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" alt="Instagram">
          </a>
          <a href="https://www.canva.com/" target="_blank">
              <img src="https://www.pikpng.com/pngl/m/518-5182949_canva-canva-logo-vector-clipart.png" alt="Canva">
          </a>
          <a href="https://www.facebook.com/" target="_blank">
              <img src="https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg" alt="Facebook">
          </a>
      </div>
  </div>
  <script>
      const apiKey = 'd0c8dbc3724940de799bcdc7d2a727be'; // åœ¨é€™è£¡å¡«å…¥ä½ çš„å¤©æ°£ API é‡‘é‘°
      const city = 'Taipei'; // è¨­å®šä½ æƒ³è¦æŸ¥è©¢çš„åŸå¸‚

      async function fetchWeather() {
          try {
              const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&lang=zh_tw&units=metric`);
              const data = await response.json();
              const weatherDescription = data.weather[0].description;
              const temperature = data.main.temp;
              document.getElementById('weather').innerHTML = `ç›®å‰å¤©æ°£ï¼š${temperature}Â°Cï¼Œ${weatherDescription}`;
          } catch (error) {
              document.getElementById('weather').innerHTML = 'ç„¡æ³•ç²å–å¤©æ°£è³‡è¨Š';
          }
      }

      let endTime = new Date();
      endTime.setHours(21, 0, 0); // é è¨­ä¸‹ç­æ™‚é–“ç‚ºä¸‹åˆ9æ™‚
      let clients = JSON.parse(localStorage.getItem('clients')) || [];
      let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
      let history = JSON.parse(localStorage.getItem('history')) || [];

      function updateCountdown() {
          const now = new Date();
          const timeRemaining = endTime - now;

          if (timeRemaining <= 0) {
              document.getElementById('timer').innerHTML = "ä¸‹ç­å›‰ï¼";
              if (clients.length > 0) {
                  let reminders = clients.map(client => `å®¢æˆ¶ ${client.name}ï¼Œé ç´„æ™‚é–“ç‚º ${client.time}`).join('\n');
                  alert(`æé†’ï¼š\n${reminders}`);
              }
              history.push(`ä¸‹ç­æ™‚é–“ï¼š${new Date().toLocaleString()}`);
              updateHistory();
              clearInterval(countdownInterval);
              return;
          }

          const hours = Math.floor((timeRemaining % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
          const minutes = Math.floor((timeRemaining % (1000 * 60 * 60)) / (1000 * 60));
          const seconds = Math.floor((timeRemaining % (1000 * 60)) / 1000);

          document.getElementById('timer').innerHTML = `å€’è¨ˆæ™‚ï¼š${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
      }

      function setEndTime() {
          const timeInput = document.getElementById('setTime').value;
          const [hours, minutes] = timeInput.split(':');
          endTime.setHours(hours, minutes, 0);
          updateCountdown(); // æ›´æ–°å€’è¨ˆæ™‚
      }

      function addClient() {
          const clientName = document.getElementById('clientName').value;
          const clientTime = document.getElementById('clientTime').value;
          if (clientName && clientTime) {
              clients.push({ name: clientName, time: clientTime, completed: false });
              localStorage.setItem('clients', JSON.stringify(clients)); // å„²å­˜åˆ° localStorage
              updateClientList();
              alert(`å·²æ–°å¢é ç´„å®¢æˆ¶ï¼š${clientName}ï¼Œé ç´„æ™‚é–“ï¼š${clientTime}`);
          } else {
              alert("è«‹è¼¸å…¥å®¢æˆ¶åç¨±å’Œé ç´„æ™‚é–“ï¼");
          }
      }

      function updateClientList() {
          const clientListDiv = document.getElementById('clientList');
          clientListDiv.innerHTML = clients.map((client, index) => `
              <div>
                  ${client.name} - ${client.time}
                  <button onclick="completeClient(${index})">å®Œæˆ</button>
              </div>
          `).join('');
      }

      function completeClient(index) {
          const completedClient = clients.splice(index, 1)[0]; // ç§»é™¤å®¢æˆ¶ä¸¦ç²å–å…¶è³‡æ–™
          history.push(`å®¢æˆ¶ ${completedClient.name} å·²å®Œæˆï¼Œé ç´„æ™‚é–“ï¼š${completedClient.time}`);
          localStorage.setItem('clients', JSON.stringify(clients)); // æ›´æ–° localStorage
          updateHistory();
          updateClientList();
          alert(`å®¢æˆ¶ ${completedClient.name} å·²æ¨™è¨˜ç‚ºå®Œæˆä¸¦ç§»è‡³æ­·å²è¨˜éŒ„ï¼`);
      }

      function addTask() {
          const taskInput = document.getElementById('taskInput').value;
          if (taskInput) {
              tasks.push(taskInput);
              localStorage.setItem('tasks', JSON.stringify(tasks)); // å„²å­˜åˆ° localStorage
              document.getElementById('taskInput').value = '';
              updateTaskList();
          } else {
              alert("è«‹è¼¸å…¥ä»»å‹™åç¨±ï¼");
          }
      }

      function updateTaskList() {
          const tasksDiv = document.getElementById('tasks');
          tasksDiv.innerHTML = tasks.map((task, index) => `<div>${task} <button onclick="removeTask(${index})">åˆªé™¤</button></div>`).join('');
      }

      function removeTask(index) {
          tasks.splice(index, 1);
          localStorage.setItem('tasks', JSON.stringify(tasks)); // æ›´æ–° localStorage
          updateTaskList();
      }

      function updateHistory() {
          const historyDiv = document.getElementById('history');
          historyDiv.innerHTML = history.map(item => `<div>${item}</div>`).join('');
          localStorage.setItem('history', JSON.stringify(history)); // å„²å­˜åˆ° localStorage
      }

      function updateDate() {
          const now = new Date();
          const options = { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' };
          document.getElementById('currentDate').innerHTML = now.toLocaleDateString('zh-TW', options);
      }

      const countdownInterval = setInterval(updateCountdown, 1000);
      const dateInterval = setInterval(updateDate, 1000);
      updateCountdown(); // åˆå§‹å‘¼å«
      updateDate(); // åˆå§‹å‘¼å«
      fetchWeather(); // ç²å–å¤©æ°£è³‡è¨Š
      updateClientList(); // æ›´æ–°å®¢æˆ¶åˆ—è¡¨
      updateHistory(); // æ›´æ–°æ­·å²è¨˜éŒ„
  </script>
</body>
</html>